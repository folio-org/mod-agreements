import groovy.transform.*
import org.olf.erm.SubscriptionAgreement

@Field SubscriptionAgreement subscriptionAgreement

final def should_expand = [
  'agreementType',
  'renewalPriority',
  'agreementStatus',
  'isPerpetual',
  'contentReviewNeeded',
  'contacts',
  'orgs',
  'externalLicenseDocs',
  'docs',
  'vendor'
]
if (params.controller != 'remoteLicenseLink' ) {
  should_expand << 'linkedLicenses'
}

json g.render(subscriptionAgreement, [expand: should_expand])
